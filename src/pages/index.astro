---
import "../styles/global.css";
import RecipePreview from "../components/RecipePreview.astro";
import { Icon } from "astro-icon/components"
import BasePage from "../layouts/BasePage.astro";
import { ICONS } from "../const.ts";
import { titleSort } from "../utils.ts";

const allRecipes = await Astro.glob("./posts/*.md");

---

<BasePage title="Home">
    <div class="flex-wrap items-center hidden gap-5 portrait:flex-col">
		<div>
			<input class="px-2 border-2 border-main-400" type="search" placeholder="Search name or ingredient"/>
		</div>
		<button class="flex items-center"><span>Cuisine </span><span><Icon name={ICONS.EXPAND}/></span></button>
		<button class="flex items-center"><span>Course </span><span><Icon name={ICONS.EXPAND}/></span></button>
		<button class="flex items-center"><span>Dietary </span><span><Icon name={ICONS.EXPAND}/></span></button>
	</div>
    
	<div class="grid gap-2 landscape:grid-cols-2">
        { allRecipes.sort(titleSort).map((post) =>
            <RecipePreview id={post.frontmatter.id} name={post.frontmatter.title} description={post.frontmatter.description} link={post.url} dietary={post.frontmatter.dietary} course={post.frontmatter.course} cuisine={post.frontmatter.cuisine} iconName={post.frontmatter.iconName}/>)
        }
    </div>
	<div class="hidden">No recipes match your filter :(</div>
</BasePage>